var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.init=function(n,o){t._host=n,t._port=o,t._socketClient=new lzm.JSONWebSocketClient(n,o),t._sendQueue=[],t._callBackQueue=[],t._currentSendObject=null,t._socketClient.onConnectCallBack=t.onConnect,t._socketClient.onCloseCallBack=t.onConnectClose,t._socketClient.onIOErrorCallBack=t.onIOError,t._socketClient.onDataCallBack=t.onData,t.clearCmd(),e.BaseApiCmdInit.initCmds()},t.onConnect=function(){e.Log.log("connect"),null==t._currentSendObject&&t._sendQueue.length>0&&(t._currentSendObject=t._sendQueue.shift()),null!=e.AccountData.getSessionToken()&&e.UserApi.resetfd(),null!=t._currentSendObject&&t.sendObject(t._currentSendObject)},t.onConnectClose=function(){e.Log.log("connectClose"),e.NetWorkError.show(),t._isError=!0},t.onIOError=function(){e.Log.log("onIOError"),e.NetWorkError.show(),t._isError=!0},t.onData=function(n){if(e.Log.log("reponseData:"+JSON.stringify(n)),n.cmd)t.dispatchCmd(n.cmd,n);else if(t._callBackQueue.length>0){e.NetworkLoading.hide(),0==t._sendQueue.length&&(t._currentSendObject=null);var o=t._callBackQueue.shift();o(n),t._sendQueue.length>0&&(t._currentSendObject=t._sendQueue.shift(),t.sendObject(t._currentSendObject))}},t.requestUser=function(e,n,o){t.request("login",e,n,o)},t.requestLogic=function(n,o,a){n.sessionToken=e.AccountData.getSessionToken(),t.request("logic",n,o,a)},t.request=function(n,o,a,i){if(!t._isError){e.NetworkLoading.show();var r={path:n,pars:o};null==t._currentSendObject?(t._currentSendObject=r,t.sendObject(t._currentSendObject)):t._sendQueue.push(r),t._callBackQueue.push(function(t){0!=t.state?null!=i?i(t):-5==t.state?e.NetWorkError.show():e.ApiState.show(t.state):null!=a&&a(t)})}},t.sendObject=function(n){if(!t._socketClient.isConnect)return void t._socketClient.connect();e.Log.log("req path:"+n.path),e.Log.log("req data:"+JSON.stringify(n.pars));var o={path:n.path,reqData:n.pars};t._socketClient.sendData(o)},t.clearCmd=function(){t._commands={},t._commandsThisObjects={}},t.registerCmd=function(e,n,o,a){void 0===a&&(a=!1);var i=t._commands[e];null==i&&(i=[]),a?i.unshift([n,o]):i.push([n,o]),t._commands[e]=i},t.removeCmd=function(e,n,o){var a=t._commands[e];null==a&&(a=[]);for(var i=-1,r=a.length,s=0;r>s;s++)a[s][0]==n&&a[s][1]==o&&(i=s);-1!=i&&a.splice(i,1),t._commands[e]=a},t.dispatchCmd=function(e,n){var o=t._commands[e];null==o&&(o=[]);for(var a,i,r=o.length,s=0;r>s;s++)a=o[s][1],i=o[s][0],i.apply(a,[n])},t}();t._isError=!1,e.BaseApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e.getRAMData=function(t){return e._ramDatas[t]},e.saveRAMData=function(t,n){e._ramDatas[t]=n},e.removeRAMData=function(t){delete e._ramDatas[t]},e.clearRAMData=function(){e._ramDatas={}},e}();t._ramDatas={},e.CacheData=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(o){void 0===o&&(o=!1);var a=t.call(this)||this;return o&&(n.currentPanel=a),null!=a.mainAssetName()&&null!=a.assetSwf()&&(a.mainAsset=a.assetSwf().createSprite(a.mainAssetName()),a.addChild(a.mainAsset),e.InterfaceVariablesUtil.initVariables(a,a.mainAsset)),a.addEventListener(egret.Event.ADDED_TO_STAGE,a._addToStage_,a),a.addEventListener(egret.Event.REMOVED_FROM_STAGE,a._removeFromStage_,a),a.init(),a}return __extends(n,t),n.prototype._addToStage_=function(e){this.layout(),this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},n.prototype._removeFromStage_=function(e){this.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},n.prototype.onResize=function(e){this.layout()},n.prototype.init=function(){},n.prototype.layout=function(){},n.prototype.on_closeBtn=function(e){this.dispose()},n.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._addToStage_,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this._removeFromStage_,this),e.InterfaceVariablesUtil.disposeVariables(this)},n.prototype.mainAssetName=function(){return null},n.prototype.assetSwf=function(){return e.AssetManager.mainSwf()},n}(lzm.BasePanel);e.BasePanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(t,n){void 0===n&&(n=!1);var o=e.call(this)||this;return o.image=new egret.Bitmap,o.setNativSize=n,o.addChild(o.image),o.reload(t),o}return __extends(t,e),t.prototype.reload=function(e){null!=e&&""!=e&&(null==this.loader&&(this.loader=new egret.ImageLoader,this.loader.addEventListener(egret.Event.COMPLETE,this.loadComplete,this)),this.loader.load(e))},t.prototype.loadComplete=function(e){null!=this.image.texture&&this.image.texture.dispose();var t=this.loader.data,n=new egret.Texture;n._setBitmapData(t),this.image.texture=n,this.setNativSize&&(this.image.width=this.image.texture.textureWidth,this.image.height=this.image.texture.textureHeight)},t.prototype.dispose=function(){null!=this.loader&&this.loader.removeEventListener(egret.Event.COMPLETE,this.loadComplete,this),null!=this.image.texture&&this.image.texture!=RES.getRes("defUser")&&(this.image.texture.dispose(),this.image.texture=null)},t.prototype.$setWidth=function(e){return this.image.width=e,!0},t.prototype.$getWidth=function(){return this.image.width},t.prototype.$setHeight=function(e){return this.image.height=e,!0},t.prototype.$getHeight=function(){return this.image.height},t}(egret.DisplayObjectContainer);e.NetImage=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.show=function(){return e.RoleData.getRole().proxy<1?void e.ApiState.showText("你还不是游戏代理"):void(RES.isGroupLoaded("manager_res")?n._show():(e.NetworkLoading.show(!0),e.AssetManager.loadConfig(e.AppConfig.manager_resConfigUrl,e.AppConfig.manager_resUrl,n.loadResConfigComplete,n)))},n.loadResConfigComplete=function(t){e.AssetManager.loadGroup("manager_res",n.loadManagerSwfCallBack,n)},n.loadManagerSwfCallBack=function(t){var o=t[0];t[1];"onResourceLoadComplete"==o&&(e.NetworkLoading.hide(),n._show())},n._show=function(){var t=egret.getDefinitionByName(e.AppConfig.manager_mainClass),n=new t;lzm.Alert.show(n)},n}(e.BasePanel);e.ManagerBase=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(n,t),n.prototype.onAddToStage=function(t){e.App.init(this.stage,this),e.AssetManager.initWithStart(this.loadResConfigCallBack,this)},n.prototype.loadResConfigCallBack=function(t){e.Log.log("初始化配置加载完成"),e.AssetManager.loadGroup("loading",this.loadResCallBack,this)},n.prototype.loadResCallBack=function(t){var n=t[0],o=t[1];"onResourceLoadComplete"==n?"loading"==o.groupName?(this.loadingUi=new e.LoadingUI,this.loadingUi.x=e.App.stageWidth/2,this.loadingUi.y=320,this.addChild(this.loadingUi),e.AssetManager.loadGroup("preload",this.loadResCallBack,this)):"preload"==o.groupName&&(e.BaseApi.init(e.AppConfig.server_host,e.AppConfig.server_port),e.SettingData.soundVolume()>0&&(starlingswf.SwfButton.defSound=RES.getRes("ui_click")),e.AppConfig.need_wx&&e.WxUtils.initWx(),this.removeChild(this.loadingUi),this.addChild(new e.LoginPanel)):"onResourceProgress"==n&&"preload"==o.groupName&&this.loadingUi.setProgress(parseInt((o.itemsLoaded/o.itemsTotal*100).toString()))},n}(egret.DisplayObjectContainer);e.CGCPStarup=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.initCmds=function(){e.BaseApi.registerCmd("joinRoom",e.RoomApi.onJoinRoom,e.RoomApi),e.BaseApi.registerCmd("returnGame",e.RoomApi.onReturnGame,e.RoomApi),e.BaseApi.registerCmd("leaveRoom",e.RoomApi.onLeaveRoom,e.RoomApi),e.BaseApi.registerCmd("leaveGame",e.RoomApi.onLeaveGame,e.RoomApi),e.BaseApi.registerCmd("disbandRoom",e.RoomApi.onDisbandRoom,e.RoomApi),e.BaseApi.registerCmd("roomTimeOver",e.RoomApi.onRoomTimeOver,e.RoomApi),e.BaseApi.registerCmd("kick",e.RoomApi.onKick,e.RoomApi),e.BaseApi.registerCmd("gameStart",e.GameApi.onGameStart,e.GameApi),e.BaseApi.registerCmd("gameOver",e.GameApi.onGameOver,e.GameApi),e.BaseApi.registerCmd("syncCard",e.RoleApi.onSyncCard,e.RoleApi),e.BaseApi.registerCmd("sendVoice",e.ChatApi.onSendVoice,e.ChatApi),e.BaseApi.registerCmd("sendText",e.ChatApi.onSendText,e.ChatApi),e.BaseApi.registerCmd("sendImage",e.ChatApi.onSendImage,e.ChatApi),e.BaseApi.registerCmd("paoMaDeng",e.AdminApi.onPaoMadeng,e.AdminApi)},t}();e.BaseApiCmdInit=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.sendVoice=function(t,n){var o={api:"chat",c:"sendVoice"};o.serverId=t,e.BaseApi.requestLogic(o,function(e){null!=n&&n(e)},null)},t.sendText=function(t){var n={api:"chat",c:"sendText"};n.textId=t,e.BaseApi.requestLogic(n,function(e){},null)},t.sendImage=function(t){var n={api:"chat",c:"sendImage"};n.imageId=t,e.BaseApi.requestLogic(n,function(e){},null)},t.onSendVoice=function(t){var n=t.serverId;e.WxUtils.downloadVoice(n,function(n){e.WxUtils.playVoice(n),e.ChatManager.showVoice(t)})},t.onSendText=function(t){e.ChatManager.showText(t)},t.onSendImage=function(t){e.ChatManager.showBq(t)},t}();e.ChatApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.getGameList=function(n){return null!=e.ExtGameConfigData.getGameList()?void n(null):void lzm.HttpClient.send(e.AppConfig.gameList,null,function(t){e.ExtGameConfigData.putGameList(JSON.parse(t)),n&&n(null)},function(e){t.getGameList(n)})},t.returnGame=function(t){var n={api:"game",c:"returnGame"};e.BaseApi.requestLogic(n,function(n){if(null!=n.room){e.RoomData.putCurrentRoom(n.room),e.RoomData.saveRoles(n.roles);for(var o=n.leaveGames,a=o.length,i=0;a>i;i++)e.RoomData.saveCurrentRoomOffline(o[i])}null!=t&&t(n)},null)},t.loginGame=function(t){var n={api:"game",c:"loginGame"};e.BaseApi.requestLogic(n,function(e){null!=t&&t(e)},null)},t.checkGameCreate=function(){var t={api:"game",c:"checkGameCreate"};e.BaseApi.requestLogic(t,function(e){},null)},t.onGameStart=function(t){e.RoomData.putCurrentRoom(t.room)},t.onGameOver=function(t){1==t.hasNewPlayer&&(e.RoleData.getRole().card=t.card,egret.setTimeout(function(){e.Log.log("获得带新人奖励 房卡2张"),e.TipPanel.create("获得带新人奖励 房卡2张",null,null)},this,300))},t}();e.GameApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.createRole=function(t,o){var a={api:"role",c:"createRole",name:t};e.BaseApi.requestLogic(a,function(t){e.RoleData.putRole(t.role),null!=o&&o(t),e.WxUtils.getLocation(function(e){n.syncPos(e.latitude,e.longitude)})},null)},n.getRoleInfo=function(t,n){var o={api:"role",c:"getRoleInfo",targetUid:t};e.BaseApi.requestLogic(o,function(e){null!=n&&n(e)},null)},n.syncPos=function(t,n){var o={api:"role",c:"syncPos"};o.latitude=t,o.longitude=n,e.BaseApi.requestLogic(o,function(o){e.RoleData.getRole().latitude=t,e.RoleData.getRole().longitude=n},null)},n.syncError=function(t){var n={api:"role",c:"syncError"};n.error=t,e.BaseApi.requestLogic(n,function(e){},null)},n.syncCard=function(t){var n={api:"role",c:"syncCard"};e.BaseApi.requestLogic(n,function(n){e.RoleData.getRole().card=n.card,null!=t&&t(n)},null)},n.shareCard=function(t,n,o){var a={api:"role",c:"shareCard"};a.targetUid=t,a.cardNum=n,e.BaseApi.requestLogic(a,function(t){e.RoleData.getRole().card=t.card,null!=o&&o(t)},null)},n.getZhanji=function(t,n){var o={api:"role",c:"getZhanji"};o.game_id=t,e.BaseApi.requestLogic(o,function(e){null!=n&&n(e)},null)},n.onSyncCard=function(t){e.RoleData.getRole().card=t.card,t.score1&&(e.RoleData.getRole().score1=t.score1),t.score2&&(e.RoleData.getRole().score2=t.score2)},n}(e.BaseApi);e.RoleApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.createRoom=function(t,n,o,a){void 0===a&&(a=null);var i={api:"room",c:"createRoom",game_id:t,createData:n};e.BaseApi.requestLogic(i,function(t){e.RoomData.putCurrentRoom(t.room);var n={};n[e.RoleData.getRole().uid]=e.RoleData.getRole(),e.RoomData.saveRoles(n),null!=o&&o(t)},a)},n.joinRoom=function(t,n){var o={api:"room",c:"joinRoom",room_id:t};e.BaseApi.requestLogic(o,function(t){e.RoomData.putCurrentRoom(t.room),e.RoomData.saveRoles(t.roles);for(var o=t.leaveGames,a=o.length,i=0;a>i;i++)e.RoomData.saveCurrentRoomOffline(o[i]);null!=n&&n(t)},null)},n.leaveRoom=function(t){var n={api:"room",c:"leaveRoom"};e.BaseApi.requestLogic(n,function(n){e.RoomData.putCurrentRoom(null),null!=t&&t(n)},null)},n.disbandRoom=function(t){var n={api:"room",c:"disbandRoom"};e.BaseApi.requestLogic(n,function(n){e.RoomData.putCurrentRoom(null),null!=t&&t(n)},null)},n.voteEndGame=function(t){var n={api:"room",c:"voteEndGame",result:t};e.BaseApi.requestLogic(n,function(e){},null)},n.checkVoteEndGame=function(){var t={api:"room",c:"checkVoteEndGame"};e.BaseApi.requestLogic(t,function(e){},null)},n.kick=function(t){var n={api:"room",c:"kick",targetUid:t};e.BaseApi.requestLogic(n,function(e){},null)},n.gameMessage=function(t){t.api="room",t.c="gameMessage",e.BaseApi.requestLogic(t,function(e){},null)},n.onJoinRoom=function(t){e.RoomData.delCurrentRoomOffline(t.sender),e.RoomData.putCurrentRoom(t.room),e.RoomData.saveRoles(t.roles),e.ApiState.showText(e.RoomData.getRole(t.sender).name+" 加入房间!")},n.onReturnGame=function(t){e.RoomData.delCurrentRoomOffline(t.sender),e.ApiState.showText(e.RoomData.getRole(t.sender).name+" 回来了!"),e.SoundManager.playPlatformSound("return_game"),e.RoomData.offLineCount<=0&&e.WaitingTextTip.hideWait()},n.onLeaveRoom=function(t){e.RoomData.delCurrentRoomOffline(t.sender),e.RoomData.putCurrentRoom(t.room),e.ApiState.showText(e.RoomData.getRole(t.sender).name+" 离开房间!")},n.onLeaveGame=function(t){e.RoomData.saveCurrentRoomOffline(t.sender),e.ApiState.showText(e.RoomData.getRole(t.sender).name+" 离开了!"),e.SoundManager.playPlatformSound("leave_game"),egret.setTimeout(function(){e.RoomData.offLineCount>0&&e.WaitingTextTip.showWait("等待其他玩家重新连接...")},n,2500)},n.onDisbandRoom=function(t){e.ExtGameHelper.exitExtGamePanel(),e.RoomData.putCurrentRoom(null)},n.onRoomTimeOver=function(t){e.ExtGameHelper.exitExtGamePanel()},n.onKick=function(t){e.ExtGameHelper.exitExtGamePanel()},n}(e.BaseApi);e.RoomApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.reg=function(t,o){var a={api:"user",c:"reg",account:t};"iOS"==egret.Capabilities.os?a.plat_id="0":"Android"==egret.Capabilities.os?a.plat_id="1":a.plat_id="2";var i=decodeURI(egret.getOption("data"));if(null!=i&&""!=i){var r=JSON.parse(i);if(r.state){var s=JSON.parse(r.state);s.recommend&&(a.recommend=s.recommend)}}e.BaseApi.requestUser(a,function(t){e.AccountData.putSessionToken(t.sessionToken),e.AccountData.putUser(t.user),n.initLoginData(t.loginData),null!=o&&o(t)},null)},n.resetfd=function(){var t={api:"user",c:"resetfd",sessionToken:e.AccountData.getSessionToken()};e.BaseApi.requestUser(t,function(){},null)},n.initLoginData=function(t){if(null!=t.role){e.RoleData.putRole(t.role),e.WxUtils.getLocation(function(t){e.RoleData.getRole().latitude=t.latitude,e.RoleData.getRole().longitude=t.longitude,e.RoleApi.syncPos(t.latitude,t.longitude)});var n=t.paoMaDeng;if(null!=n)for(var o=(n.length,0);o<n.length;o++)e.PaoMaDeng.show(n[o][0],n[o][1],n[o][2])}},n}(e.BaseApi);e.UserApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.loadConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.loadConfigComplete,this),null!=this.callBack&&null!=this.CallBackThisObj&&this.callBack.apply(this.CallBackThisObj,[["loadConfigComplete",e]])},e.prototype.onResourceLoadComplete=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),null!=this.callBack&&null!=this.CallBackThisObj&&this.callBack.apply(this.CallBackThisObj,[["onResourceLoadComplete",e]])},e.prototype.onResourceLoadError=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),null!=this.callBack&&null!=this.CallBackThisObj&&this.callBack.apply(this.CallBackThisObj,[["onResourceLoadError",e]])},e.prototype.onResourceProgress=function(e){null!=this.callBack&&null!=this.CallBackThisObj&&this.callBack.apply(this.CallBackThisObj,[["onResourceProgress",e]])},e.prototype.onItemLoadError=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),null!=this.callBack&&null!=this.CallBackThisObj&&this.callBack.apply(this.CallBackThisObj,[["onItemLoadError",e]])},e}();e.AssetLoadObject=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.initWithStart=function(n,o){RES.registerAnalyzer("swf",starlingswf.SwfAnalyzer),RES.registerAnalyzer("js",e.JSAnalyzer),egret.ImageLoader.crossOrigin="Anonymous",t.is_local?t.loadConfig(e.AppConfig.platform_res_config_url,e.AppConfig.platform_res_url,n,o,e.AccountData.getUrlData().resVer):(e.AppConfig.platform_res_url="http://192.168.2.188/aptana/cgc_platform/resource/",t.loadConfig("http://192.168.2.188/aptana/cgc_platform/resource/default.res.json","http://192.168.2.188/aptana/cgc_platform/resource/",n,o,e.AccountData.getUrlData().resVer))},t.loadConfig=function(e,t,n,o,a){void 0===a&&(a=""),e+="?v="+Math.random(),lzm.HttpClient.send(e,{},function(e){var i=JSON.parse(e);if(null!=a&&""!=a){var r=i.resources;for(var s in r)r[s].url+="?v="+a}RES.parseConfig(i,t),n.apply(o,[["loadConfigComplete",i]])})},t.unConfig=function(e){for(var t,n,o,a=RES,i=a.configInstance,r=e.groups,s=e.resources,l=r.length,c=0;l>c;c++)t=r[c],delete i.groupDic[t.name];l=s.length;for(var c=0;l>c;c++)if(t=s[c],n=t.subkeys,delete i.keyMap[t.name],null!=n){o=n.length;for(var u=0;o>u;u++)delete i.keyMap[n[u]]}},t.loadGroup=function(t,n,o){var a=new e.AssetLoadObject;return a.callBack=n,a.CallBackThisObj=o,RES.isGroupLoaded(t)?void a.onResourceLoadComplete(null):(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,a.onResourceLoadComplete,a),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,a.onResourceLoadError,a),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,a.onResourceProgress,a),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a.onItemLoadError,a),void RES.loadGroup(t))},t.mainSwf=function(){return RES.getRes("main_swf")},t.managerSwf=function(){return RES.getRes("manager_swf")},t.chatSwf=function(){return RES.getRes("chat_swf")},t.mainNewSwf=function(){return RES.getRes("main_new_swf")},t}();t.is_local=!0,e.AssetManager=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(n,o,a){this.callBack=o,this.CallBackThisObj=a,null!=t.gameConf&&t.gameConf.id!=n.id&&(RES.destroyRes("game_res_"+t.gameConf.id),e.AssetManager.unConfig(t.gameResConfig)),t.gameConf=n}return t.prototype.startLoad=function(){RES.isGroupLoaded("game_res_"+t.gameConf.id)?this.callBack.apply(this.CallBackThisObj,[]):(e.NetworkLoading.show(!0),e.AssetManager.loadConfig(t.gameConf.resBaseUrl+t.gameConf.resVer+"/default.res.json",t.gameConf.resBaseUrl+t.gameConf.resVer+"/",this.onLoadAssetConfComplete,this,t.gameConf.resVer))},t.prototype.onLoadAssetConfComplete=function(n){t.gameResConfig=n[1],e.AssetManager.loadGroup("game_res_"+t.gameConf.id,this.onLoadAssetComplete,this)},t.prototype.onLoadAssetComplete=function(t){var n=t[0],o=t[1];if("onResourceLoadComplete"==n)e.NetworkLoading.hide(),this.callBack.apply(this.CallBackThisObj,[]);else if("onResourceProgress"==n){var a=parseInt((o.itemsLoaded/o.itemsTotal*100).toString());e.NetworkLoading.setLoadinText(a+"%")}},t}();e.GameAssetLoader=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(){var n=e.call(this)||this;return n._dataFormat=egret.HttpResponseType.TEXT,t.jsDic={},n}return __extends(t,e),t.prototype.analyzeData=function(e,n){var o=e.name;if(!this.fileDic[o]&&n&&1!=t.jsDic[o]){var a=n;this.fileDic[o]=a;var i="\n            lj = window.lj;\n            "+a+";\n            ",r=new Function(i);r(),t.jsDic[o]=1}},t}(RES.BinAnalyzer);e.JSAnalyzer=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.setGameConfig=function(e){null!=t.currentGameConf&&e.id!=t.currentGameConf.id&&t.disposeSounds(),null==t.currentGameConf&&(t.currentGameSounds={},t.currentGameSoundChannels={},t.currentGameSoundUrls={}),t.currentGameConf=e},t.playPlatformSound=function(t){var n=RES.getRes(t);if(null!=n){var o=n.play(0,1);o.volume=e.SettingData.soundVolume()}},t.playGameSound=function(n,o){void 0===o&&(o=1);var a=e.SettingData.soundVolume();a>0&&t.playSound(n,o,a)},t.playBgSound=function(n){t.currentBgName&&t.stopGameSound(t.currentBgName),t.currentBgName=n;var o=e.SettingData.bgSoundVolume();o>0&&t.playSound(n,0,o)},t.stopGameSound=function(e){var n=t.currentGameSoundChannels[e];null!=n&&n.stop()},t.playSound=function(e,n,o){void 0===n&&(n=1),void 0===o&&(o=1);var a,i=t.currentGameSounds[e];if(null!=i)a=i.play(0,n),a.volume=o,t.currentGameSoundChannels[e]=a;else{var r=t.currentGameConf.resBaseUrl+t.currentGameConf.resVer+"/sound/"+e+"?v="+t.currentGameConf.resVer;RES.getResByUrl(r,function(i){t.currentGameSounds[e]=i,a=i.play(0,n),a.volume=o,t.currentGameSoundChannels[e]=a,t.currentGameSoundUrls[e]=r},t,RES.ResourceItem.TYPE_SOUND)}},t.disposeSounds=function(){var e,n;for(var o in t.currentGameSounds)e=t.currentGameSounds[o],n=t.currentGameSoundChannels[o],null!=n&&n.stop(),null!=e&&e.close(),RES.destroyRes(t.currentGameSoundUrls[o]);t.currentGameSounds={},t.currentGameSoundChannels={},t.currentGameSoundUrls={}},t.playChangYongYu=function(n){null==t.changyongSounds&&(t.changyongSounds={},t.changyongSoundChannels={});var o,a=t.changyongSounds[n];if(null!=a)o=a.play(0,1),o.volume=e.SettingData.soundVolume(),t.changyongSoundChannels[n]=o;else{var i=e.AppConfig.platform_res_url+"changyongSound/"+n+"?v="+t.currentGameConf.resVer;RES.getResByUrl(i,function(a){t.changyongSounds[n]=a,o=a.play(0,1),o.volume=e.SettingData.soundVolume(),t.changyongSoundChannels[n]=o},t,RES.ResourceItem.TYPE_SOUND)}},t}();e.SoundManager=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.init=function(e,n){e.scaleMode=egret.StageScaleMode.FIXED_WIDTH,e.addEventListener(egret.Event.RESIZE,t.onResize,t),t.stage=e,t.appRoot=n,t.topContainer=new egret.DisplayObjectContainer,t.stageRealWidth=e.stageWidth,t.stageRealHeight=e.stageHeight,t.stageWidth=e.stageWidth,t.stageHeight=e.stageHeight,e.addChild(t.topContainer);var o=t.stageWidth/t.designWidth,a=t.stageHeight/t.designHeight;o>a?t.alertScale=a:t.alertScale=o,lzm.Alert.init(t.appRoot,t.stageWidth,t.stageHeight,t.alertScale)},t.scaleByY=function(){var e=t.stageRealHeight/t.designHeight;t.appRoot.scaleX=t.appRoot.scaleY=e,t.stageWidth=1/e*t.stageRealWidth,t.stageHeight=t.designHeight},t.scaleByX=function(){var e=t.stageRealWidth/t.designWidth;t.appRoot.scaleX=t.appRoot.scaleY=e,t.stageWidth=t.designWidth,t.stageHeight=1/e*t.stageRealHeight},t.scaleByXY=function(){var e=t.stageRealWidth/t.designWidth,n=t.stageRealHeight/t.designHeight;e>n?t.stageWidth=t.designHeight*(e/n):n>e&&(t.stageHeight=t.designHeight*(n/e)),t.appRoot.scaleX=t.appRoot.scaleY=n>e?e:n},t.onResize=function(e){t.stageRealWidth=t.stage.stageWidth,t.stageRealHeight=t.stage.stageHeight,t.stageWidth=t.stage.stageWidth,t.stageHeight=t.stage.stageHeight;var n=t.stageWidth/t.designWidth,o=t.stageHeight/t.designHeight;n>o?t.alertScale=o:t.alertScale=n,lzm.Alert.init(t.appRoot,t.stageWidth,t.stageHeight,t.alertScale)},Object.defineProperty(t,"isLandscape",{get:function(){return t._isLandscape},set:function(n){t._isLandscape=n,e.PaoMaDeng.instance&&e.PaoMaDeng.instance.layout()},enumerable:!0,configurable:!0}),t.heart=function(){egret.setTimeout(function(){t.heartFun()},t,6e4)},t.heartFun=function(){null!=e.RoleData.getRole()&&e.RoleApi.syncCard(null),t.heart()},t}();t.stageRealWidth=640,t.stageRealHeight=1136,t.designWidth=640,t.designHeight=1136,t.stageWidth=640,t.stageHeight=1136,t._isLandscape=!1,e.App=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e}();t.gameList="http://192.168.2.188/aptana/cgc_platform/gameList.php",t.pay_path="http://poker.sh-lingjing.com/cgc_server/pay/startPay.php",t.login_path="http://poker.sh-lingjing.com/cgc_server/cgcplatform_index.php",t.web_res_path="http://poker.sh-lingjing.com/cgc_client/",t.server_host="192.168.2.188",t.server_port=7502,t.platform_res_config_url="resource/default.res.json",t.platform_res_url="resource/",t.need_wx=!1,t.wx_jssdk_config_path="http://poker.sh-lingjing.com/cgc_server/wxJsSdkConfig.php",t.account="",t.manager_mainClass="lj.cgcp.ManagerPanel",t.weichat_account_url="",t.pay_by_proxy_path="",e.AppConfig=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.showChatPanel=function(){e.App.isLandscape?lzm.Alert.alertLandscape(new e.ChatPanel):lzm.Alert.alert(new e.ChatPanel)},t.showText=function(n){var o=n.sender,a=n.textId,i=e.RoleHeadCache.getHead(o);if(null!=i&&null!=i.parent){var r=RES.getRes("chatConfig").texts,s=""==r[parseInt(a)][1]?r[parseInt(a)][0]:r[parseInt(a)][1],l=e.AssetManager.chatSwf().createSprite("spr_text");l.getChildAt(1).width=1e3,l.getChildAt(1).text=s;var c=l.getChildAt(1).textWidth+32;l.getChildAt(0).width=c,t.showSprite(l,i,c);var u=r[parseInt(a)][2];if(""!=u){var p=e.RoomData.getRole(o);e.SoundManager.playChangYongYu(p.sex+"/"+u)}}},t.showVoice=function(n){var o=n.sender,a=e.RoleHeadCache.getHead(o);if(null!=a&&null!=a.parent){var i=e.AssetManager.chatSwf().createImage("img_TY_D4");t.showSprite(i,a,50)}},t.showSprite=function(n,o,a){var i=o.localToGlobal(0,0),r=e.App.stageWidth/3,s=e.App.stageHeight/3,l=parseInt((i.x/r).toString()),c=parseInt((i.y/s).toString());e.App.isLandscape?(c>=2?(n.x=i.x,n.y=i.y-a):c>=1?(i.x>e.App.stageWidth/2?n.x=i.x-o.height:n.x=i.x+n.height,n.y=i.y+(o.width-a)/2):(n.x=i.x,n.y=i.y+o.width),n.rotation=90):c>=1?l>=2?(n.x=i.x-a,n.y=i.y):l>=1?(n.x=i.x+(o.width-a)/2,n.y=i.y-n.height):(n.x=i.x+o.width,n.y=i.y):l>=2?(n.x=i.x-a,n.y=i.y):l>=1?(n.x=i.x+(o.width-a)/2,n.y=i.y+o.height):(n.x=i.x+o.width,n.y=i.y),n.scaleX=n.scaleY=0,e.App.appRoot.addChild(n),egret.Tween.get(n).to({scaleX:1,scaleY:1},300,egret.Ease.backOut),egret.setTimeout(function(){e.App.appRoot.removeChild(n)},t,3e3)},t.showBq=function(n){var o=n.sender,a=n.imageId,i=e.RoleHeadCache.getHead(o);if(null!=i&&null!=i.parent){var r=i.localToGlobal(0,0),s=e.AssetManager.chatSwf().createImage("img_chat_bq_"+a);s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,e.App.isLandscape?(s.x=r.x-i.height/2,s.y=r.y+i.width/2,s.rotation=90):(s.x=r.x+i.width/2,s.y=r.y+i.height/2),s.scaleX=s.scaleY=0,e.App.appRoot.addChild(s),egret.Tween.get(s).to({scaleX:1,scaleY:1},300,egret.Ease.backOut),egret.setTimeout(function(){e.App.appRoot.removeChild(s)},t,3e3)}},t}();e.ChatManager=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.getSessionToken=function(){return e.CacheData.getRAMData("sessionToken")},t.putSessionToken=function(t){e.CacheData.saveRAMData("sessionToken",t)},t.getUser=function(){return e.CacheData.getRAMData("user")},t.putUser=function(t){e.CacheData.saveRAMData("user",t)},t.getUrlData=function(){return null==e.AppConfig.urlData?{}:e.AppConfig.urlData},t}();e.AccountData=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.DisplayObjectContainer);e.ActivityBase=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){this.resVer=""}return e}();e.ExtGameConfig=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.putGameList=function(t){e.CacheData.saveRAMData("extGameconfigData",t)},t.getGameList=function(){return e.CacheData.getRAMData("extGameconfigData")},t.getGameConfig=function(e){for(var n=t.getGameList(),o=n.length,a=0;o>a;a++)if(n[a].id==e)return n[a];return null},t}();e.ExtGameConfigData=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e}();e.Role=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.getRole=function(){return e.CacheData.getRAMData("role")},t.putRole=function(t){null==t.payCount&&(t.payCount=0),null==t.score1&&(t.score1=0),null==t.score2&&(t.score2=0),null==t.turnover&&(t.turnover=0),e.CacheData.saveRAMData("role",t)},t.getRoleName=function(t){return e.CacheData.getRAMData("roleNamesCache:"+t)},t.putRoleName=function(t,n){e.CacheData.saveRAMData("roleNamesCache:"+t,n)},t}();e.RoleData=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e.clear=function(){e.heads={}},e.addHead=function(t,n){e.cache&&null==e.heads[t]&&(e.heads[t]=n)},e.replaceHead=function(t,n){if(e.cache){var o=e.getHead(t);null!=o&&(delete e.heads[t],e.addHead(n,o))}},e.getHead=function(t){return e.heads[t]},e}();t.cache=!1,t.heads={},e.RoleHeadCache=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e}();e.Room=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.getCurrentRoom=function(){return e.CacheData.getRAMData("currentRoom")},n.putCurrentRoom=function(t){e.CacheData.saveRAMData("currentRoom",t),null==t&&(n.saveRoles(null),e.CacheData.removeRAMData("currentRoomOffline"))},n.getCurrentRoomOffline=function(){var t=e.CacheData.getRAMData("currentRoomOffline");return null==t?{}:t},n.saveCurrentRoomOffline=function(t){var n=e.CacheData.getRAMData("currentRoomOffline");null==n&&(n={}),n[t]=1,e.CacheData.saveRAMData("currentRoomOffline",n)},n.delCurrentRoomOffline=function(t){var n=e.CacheData.getRAMData("currentRoomOffline");null!=n&&(delete n[t],e.CacheData.saveRAMData("currentRoomOffline",n))},Object.defineProperty(n,"offLineCount",{get:function(){var t=e.CacheData.getRAMData("currentRoomOffline");if(null==t)return 0;var n=0;for(var o in t)n++;return n},enumerable:!0,configurable:!0}),n.getPlayerIndex=function(e){var t=n.getCurrentRoom().players;
for(var o in t)if(e==t[o])return parseInt(o);return-1},n.saveRoles=function(t){e.ExtGameHelper.saveRAMData("currentRoom_roles",t)},n.getRoles=function(){return e.ExtGameHelper.getRAMData("currentRoom_roles")},n.saveRole=function(e){var t=n.getRoles();null==t&&(t={}),t[e.uid]=e,n.saveRoles(t)},n.getRole=function(e){var t=n.getRoles();return null==t?null:t[e]},n}(e.CacheData);e.RoomData=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e.bgSoundVolume=function(){var e=egret.localStorage.getItem("bgSoundVolume");return null==e?.1:parseFloat(e)},e.setBgSoundVolume=function(e){egret.localStorage.setItem("bgSoundVolume",e.toString())},e.soundVolume=function(){var e=egret.localStorage.getItem("soundVolume");return null==e?1:parseFloat(e)},e.setSoundVolume=function(e){egret.localStorage.setItem("soundVolume",e.toString())},e}();e.SettingData=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e}();e.User=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.onInit=function(t,n){e.Log.log("ExtGame ---> onInit")},n.prototype.onJoinRoom=function(t){e.Log.log("ExtGame ---> onJoinRoom")},n.prototype.onReturnGame=function(t){e.Log.log("ExtGame ---> onReturnGame")},n.prototype.onLeaveRoom=function(t){e.Log.log("ExtGame ---> onLeaveRoom")},n.prototype.onLeaveGame=function(t){e.Log.log("ExtGame ---> onLeaveGame")},n.prototype.onDisbandRoom=function(t){e.Log.log("ExtGame ---> onDisbandRoom")},n.prototype.onGameMessage=function(t){e.Log.log("ExtGame ---> onGameMessage")},n.prototype.layout=function(){e.Log.log("ExtGame ---> layout")},n.prototype.dispose=function(){e.Log.log("ExtGame ---> dispose")},n}(egret.DisplayObjectContainer);e.ExtGame=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardType=-1,t.aa=!1,t}return __extends(t,e),t.prototype.create=function(){this.dispatchEventWith(t.onCreate)},t.prototype.createData=function(){return{}},t.prototype.dispose=function(){},t}(egret.DisplayObjectContainer);t.onCreate="ExtGameCreatePanel.onCreate",e.ExtGameCreatePanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.getRAMData=function(e){return t._ramDatas[e]},t.saveRAMData=function(e,n){t._ramDatas[e]=n},t.removeRAMData=function(e){delete t._ramDatas[e]},t.clearRAMData=function(){t._ramDatas={}},t.currentGameConfig=function(){return null!=t.extGamePanel?t.extGamePanel.gameConfig:void 0},t.setBackGroundColor=function(n){null!=t.extGamePanel&&(t.extGamePanel.backgroundColor=n,t.extGamePanel.background.graphics.clear(),t.extGamePanel.background.graphics.beginFill(n),t.extGamePanel.background.graphics.drawRect(0,0,e.App.stageWidth,e.App.stageHeight),t.extGamePanel.background.graphics.endFill())},t.backToWx=function(){e.WxUtils.closeWindow()},t.showShareTip=function(){e.ShareTip.instance.show()},t.isOffLine=function(t){var n=e.RoomData.getCurrentRoomOffline();return null==n[t]?!1:!0},t.exitExtGamePanel=function(){lzm.Alert.closeAllAlert(),e.RoomData.putCurrentRoom(null),e.WaitingTextTip.hideWait(),t.clearRAMData(),t.extGamePanel.gotoPanel(new e.MainPanel),t.extGamePanel=null},t.leaveRoom=function(){e.TipPanel.create("您确定要离开房间吗？",t,t._leaveRoom)},t.disbandRoom=function(){e.TipPanel.create("您确定要离开房间吗？",t,t._leaveRoom)},t._leaveRoom=function(){var n=e.RoomData.getCurrentRoom();n.data.isStart?e.RoomApi.voteEndGame(1):(n.owner==e.RoleData.getRole().uid?e.RoomApi.disbandRoom(null):e.RoomApi.leaveRoom(null),t.exitExtGamePanel())},t.sendGameMessage=function(t){e.RoomApi.gameMessage(t)},t.kick=function(t){e.RoomApi.kick(t)},t.gameIsStart=function(){var t=e.RoomData.getCurrentRoom();return t.data.isStart?!0:!1},t.showSetting=function(){e.App.isLandscape?lzm.Alert.alertLandscape(new e.SettingPanel):lzm.Alert.alert(new e.SettingPanel)},t}();t._ramDatas={},e.ExtGameHelper=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(e){},t.prototype.dispose=function(){},t}(egret.DisplayObjectContainer);e.ExtGameScorePanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.mainAsset=RES.getRes("loading_swf").createSprite("spr_loading"),t.addChild(t.mainAsset),t.textField=t.mainAsset.getTextField("loadingText"),t}return __extends(t,e),t.prototype.setProgress=function(e){this.textField.text="Loading..."+e+"%"},t}(egret.Sprite);e.LoadingUI=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.DisplayObjectContainer);e.MatchBase=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.getFollowCard=function(t){var n={api:"activity",c:"getFollowCard"};e.BaseApi.requestLogic(n,function(n){e.RoleData.getRole().card=n.card,null!=t&&t(n)},null)},t}();e.ActivityApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var n=t.call(this)||this;n.proxy_id=egret.getOption("proxy_id"),n.card_number=0;var o=n;return e.RoleApi.getRoleInfo(n.proxy_id,function(e){o.roleProxy=e.role,o.initInfos(e.role)}),n}return __extends(n,t),n.prototype.initInfos=function(t){this.headImag=new e.RoleHeadImage(t),this.headImag.width=this.headImag.height=136,this.headImag.x=33,this.headImag.y=153,this.addChild(this.headImag),this.idText.text=t.uid,this.nameText.text=t.name,this.cardText.text="库存："+t.card,this.shareCardText.addEventListener(egret.Event.FOCUS_OUT,this.onShareCardTextFocusOut,this),this.card_number=30,this.shareCardText.text="30"},n.prototype.on_jianBtn=function(e){this.card_number-=10,this.card_number<10&&(this.card_number=10),this.shareCardText.text=this.card_number.toString()},n.prototype.on_jiaBtn=function(e){this.card_number+=10,this.shareCardText.text=this.card_number.toString()},n.prototype.onShareCardTextFocusOut=function(e){this.card_number=parseInt(this.shareCardText.text),(this.card_number<1||isNaN(this.card_number))&&(this.card_number=1),this.shareCardText.text=this.card_number.toString()},n.prototype.on_buyBtn=function(t){e.NetworkLoading.show(!0);var n=this,o={};o.openid=e.AppConfig.account,o.proxy_id=this.proxy_id,o.card_number=this.card_number,lzm.HttpClient.send(e.AppConfig.pay_by_proxy_path,o,function(t){e.NetworkLoading.hide();var o=JSON.parse(t);if("SUCCESS"!=o.return_code){var a={error1:"参数非法",error2:"参数非法",error3:"库存不足，下单失败",error4:"参数非法",error5:"自己不能购买自己的卡",error6:"代理之间不能相互购卡"};e.ApiState.showText(a[o.return_code])}else o.success=function(t){e.RoleApi.syncCard(function(t){e.ApiState.showText("购买成功"),n.roleProxy.card-=n.card_number,n.cardText.text=n.roleProxy.card.toString()})},wx.chooseWXPay(o)},function(t){e.NetworkLoading.hide(),e.ApiState.showText("连接超时")})},n.prototype.dispose=function(){t.prototype.dispose.call(this),null!=this.headImag&&this.headImag.dispose(),this.shareCardText.removeEventListener(egret.Event.FOCUS_OUT,this.onShareCardTextFocusOut,this)},n.prototype.mainAssetName=function(){return"spr_buy_card_from_proxy"},n}(e.BasePanel);e.BuyCardFromProxy=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var e=t.call(this)||this,n=e;return egret.setTimeout(function(){n.createTexts(),n.createBqs()},e,10),e}return __extends(n,t),n.prototype.createTexts=function(){this.texts=[];var t=new egret.DisplayObjectContainer,n=new egret.ScrollView;n.setContent(t),n.x=321.6,n.y=89.6,n.width=300.5,n.height=414.1,this.addChild(n);for(var o,a=RES.getRes("chatConfig").texts,i=a.length,r=52,s=0;i>s;s++)o=e.AssetManager.chatSwf().createSprite("spr_text"),o.y=s*r,o.name=s.toString(),o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickText,this),o.getChildAt(1).text=a[s][0],t.addChild(o),this.texts.push(o)},n.prototype.createBqs=function(){this.bqs=[];for(var e=0,t=this.mainAsset.getImage("bq"+e);null!=t;)t.touchEnabled=!0,t.name=e.toString(),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBq,this),this.bqs.push(t),e++,t=this.mainAsset.getImage("bq"+e)},n.prototype.onClickText=function(t){var n=t.currentTarget;e.ChatApi.sendText(n.name),this.on_closeBtn(null)},n.prototype.onClickBq=function(t){var n=t.currentTarget;e.ChatApi.sendImage(n.name),this.on_closeBtn(null)},n.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e,n,o=this.texts.length,a=0;o>a;a++)e=this.texts[a],e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickText,this);o=this.bqs.length;for(var a=0;o>a;a++)n=this.bqs[a],n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBq,this)},n.prototype.mainAssetName=function(){return"spr_chat_main"},n.prototype.assetSwf=function(){return e.AssetManager.chatSwf()},n}(e.BasePanel);e.ChatPanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.mainPanel=e,n}return __extends(n,t),n.prototype.on_ckBtn=function(t){e.NetworkLoading.show(!0);var n=this,o={};o.openid=e.AppConfig.account,o.shop_id="10",lzm.HttpClient.send(e.AppConfig.pay_path,o,function(t){e.NetworkLoading.hide();var o=JSON.parse(t);"SUCCESS"!=o.return_code?e.ApiState.showText("下单失败"):(o.success=function(t){e.RoleApi.syncCard(function(t){n.mainPanel.fkText.text=e.RoleData.getRole().card.toString()})},wx.chooseWXPay(o))},function(t){e.NetworkLoading.hide(),e.ApiState.showText("连接超时")})},n.prototype.mainAssetName=function(){return"spr_dailizhaomu"},n}(e.BasePanel);e.ProxyPanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(n,o,a,i){void 0===i&&(i=null);var r=t.call(this,!0)||this;r.backgroundColor=-1,r.gameCreate=!1,r.gameConfig=n,r.room=o,r.roles=a,r.voteEndGames=i,r.background=new egret.Shape,r.addChildAt(r.background,0),e.ExtGameHelper.extGamePanel=r,e.App.isLandscape=r.gameConfig.isLandscape,e.SoundManager.setGameConfig(r.gameConfig),e.WxUtils.joinGame(r.gameConfig),e.RoleHeadCache.cache=!0;var s=egret.getDefinitionByName(r.gameConfig.mainClass);return r.game=new s,e.BaseApi.registerCmd("joinRoom",r.game.onJoinRoom,r.game),e.BaseApi.registerCmd("returnGame",r.game.onReturnGame,r.game),e.BaseApi.registerCmd("leaveRoom",r.game.onLeaveRoom,r.game,!0),e.BaseApi.registerCmd("leaveGame",r.game.onLeaveGame,r.game),e.BaseApi.registerCmd("disbandRoom",r.game.onDisbandRoom,r.game,!0),e.BaseApi.registerCmd("gameMessage",r.game.onGameMessage,r.game),e.BaseApi.registerCmd("voteEndGame",r.onVoteEndGame,r),e.BaseApi.registerCmd("gameMessage",r.onGameMessage,r),r.gameCreate=!1,r.checkGameCreateId=egret.setInterval(r.checkGameCrate,r,3e3),r.addChild(r.game),r.scaleGame(),r.game.onInit(r.room,r.roles),r.loadChat(),e.NetworkLoading.show(),r}return __extends(n,t),n.prototype.scaleGame=function(){this.gameConfig.isLandscape?(this.game.anchorOffsetX=568,this.game.anchorOffsetY=320,this.game.rotation=90):(this.game.anchorOffsetX=320,this.game.anchorOffsetY=568);var t=e.App.stageWidth/640,n=e.App.stageHeight/1136;t>n?this.game.scaleX=this.game.scaleY=n:this.game.scaleX=this.game.scaleY=t,this.game.x=e.App.stageWidth/2,this.game.y=e.App.stageHeight/2},n.prototype.layout=function(){null!=this.game&&(this.game.rotation=0,this.scaleGame()),-1!=this.backgroundColor&&e.ExtGameHelper.setBackGroundColor(this.backgroundColor)},n.prototype.addToStage=function(n){t.prototype.addToStage.call(this,n),null!=this.voteEndGames&&this.voteEndGames.length>0&&(this.voteEndGamePanel=new e.VoteEndGamePanel,this.voteEndGamePanel.showByDatas(this.voteEndGames),lzm.Alert.alert(this.voteEndGamePanel)),e.RoomData.offLineCount>0&&e.WaitingTextTip.showWait("等待其他玩家重新连接...")},n.prototype.onVoteEndGame=function(t){if(1!=t.result||t.allChoose)return null!=this.voteEndGamePanel&&this.voteEndGamePanel.on_closeBtn(null),void(this.voteEndGamePanel=null);if(null==this.voteEndGamePanel){this.voteEndGamePanel=new e.VoteEndGamePanel;var n=e.RoomData.getRole(t.sender);this.voteEndGamePanel.setLeaveName(n.name)}null==this.voteEndGamePanel.parent&&lzm.Alert.alert(this.voteEndGamePanel),t.sender==e.RoleData.getRole().uid&&this.voteEndGamePanel.setBtnState(),this.voteEndGamePanel.items[t.sender].setState(1)},n.prototype.onGameMessage=function(t){this.gameCreate=!0,e.BaseApi.removeCmd("gameMessage",this.onGameMessage,this),egret.clearInterval(this.checkGameCreateId),e.NetworkLoading.hide(),e.TipWarning.show()},n.prototype.checkGameCrate=function(){e.GameApi.checkGameCreate()},n.prototype.loadChat=function(){RES.isGroupLoaded("chat")||(e.NetworkLoading.show(!0),e.AssetManager.loadGroup("chat",this.loadChatSwfCallBack,this))},n.prototype.loadChatSwfCallBack=function(t){var n=t[0];"onResourceLoadComplete"==n&&e.NetworkLoading.hide()},n.prototype.dispose=function(){null!=this.game&&(e.BaseApi.removeCmd("joinRoom",this.game.onJoinRoom,this.game),e.BaseApi.removeCmd("returnGame",this.game.onReturnGame,this.game),e.BaseApi.removeCmd("leaveRoom",this.game.onLeaveRoom,this.game),e.BaseApi.removeCmd("leaveGame",this.game.onLeaveGame,this.game),e.BaseApi.removeCmd("disbandRoom",this.game.onDisbandRoom,this.game),e.BaseApi.removeCmd("gameMessage",this.game.onGameMessage,this.game),e.BaseApi.removeCmd("voteEndGame",this.onVoteEndGame,this),this.game.dispose()),e.ExtGameHelper.extGamePanel=null,e.App.isLandscape=!1,e.RoleHeadCache.cache=!1,e.RoleHeadCache.clear(),t.prototype.dispose.call(this)},n}(e.BasePanel);e.ExtGamePanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(t,n){this.mainPanel=t,this.mainAsset=n,e.InterfaceVariablesUtil.initVariables(this,this.mainAsset),this.gameNameText=BmTextUtil.replaceTextfield(this.gameNameText,RES.getRes("game_name")),this.closeBtn.visible=!1}return t.prototype.setGameConfig=function(e){this.gameConf=e,this.gameNameText.text=e.id,this.gameNameText.visible=!1},t.prototype.on_createRoomBtn=function(t){null!=this.createGamePanel&&this.createGamePanel.dispose();var n=egret.getDefinitionByName(this.gameConf.createClass);this.createGamePanel=new n,this.createGamePanel.addEventListener(e.ExtGameCreatePanel.onCreate,this.onCreatePanelCreate,this),lzm.Alert.alert(this.createGamePanel)},t.prototype.on_joinRoomBtn=function(e){this.closeBtn.visible=!1,this.mainPanel.roomNumberInputPanel.setGameConfig(this.gameConf);var t=this,n=this.mainPanel.mainContent;egret.Tween.get(n).to({x:-1280},300,egret.Ease.backIn).call(function(){t.mainPanel.roomNumberInputPanel.closeBtn.visible=!0})},t.prototype.on_zhanjiBtn=function(t){null!=this.scorePanel&&this.scorePanel.dispose();var n=egret.getDefinitionByName(this.gameConf.playLogClass);if(null==n)return void e.ApiState.showText("该游戏战绩功能未开放");var o=this;e.RoleApi.getZhanji(this.gameConf.id,function(e){o.scorePanel=new n,o.scorePanel.init(e),lzm.Alert.alert(o.scorePanel)})},t.prototype.on_closeBtn=function(e){this.closeBtn.visible=!1;var t=this,n=this.mainPanel.mainContent;egret.Tween.get(n).to({x:0},300,egret.Ease.backIn).call(function(){t.mainPanel.roleHeadSpr.visible=!0})},t.prototype.onCreatePanelCreate=function(t){var n=this,o={};o.cardType=this.createGamePanel.cardType,o.aa=this.createGamePanel.aa;var a=this.createGamePanel.createData();for(var i in a)o[i]=a[i];e.RoomApi.createRoom(this.gameConf.id,o,function(t){lzm.Alert.closeAllAlert();var o={};o[e.RoleData.getRole().uid]=e.RoleData.getRole(),e.BasePanel.currentPanel.gotoPanel(new e.ExtGamePanel(n.gameConf,t.room,o))},function(t){-8==t.state&&(lzm.Alert.alert(new e.ProxyPanel(n.mainPanel)),e.ApiState.showText("房卡不足"))})},t.prototype.dispose=function(){e.InterfaceVariablesUtil.disposeVariables(this),null!=this.createGamePanel&&(this.createGamePanel.removeEventListener(e.ExtGameCreatePanel.onCreate,this.onCreatePanelCreate,this),this.createGamePanel.dispose()),null!=this.scorePanel&&this.scorePanel.dispose()},t}();e.JoinGamePanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(t,n){this.numTextNames=["n21","n22","n23","n24","n25","n26"],this.numBtnNames=["n0","n1","n2","n3","n4","n5","n6","n7","n8","n9"],this.numBtnVals=[0,1,2,3,4,5,6,7,8,9],this.roomNum=[-1,-1,-1,-1,-1,-1],this.mainPanel=t,this.mainAsset=n,e.InterfaceVariablesUtil.initVariables(this,this.mainAsset),this.closeBtn.visible=!1,this.joinBtn.visible=!1,this.initNumBtns()}return t.prototype.setGameConfig=function(e){this.gameConf=e},t.prototype.initNumBtns=function(){this.numTexts=[];for(var e in this.numTextNames)this.numTexts.push(this.mainAsset.getTextField(this.numTextNames[e])),this.numTexts[e].text="";this.numBtns=[];for(var e in this.numBtnNames)this.numBtns.push(this.mainAsset.getButton(this.numBtnNames[e])),this.numBtns[e].addEventListener(starlingswf.SwfButton.onClick,this.onNumBtn,this)},t.prototype.on_delBtn=function(e){for(var t=this.roomNum.length,n=t-1;n>=0;n--)if(-1!=this.roomNum[n]){this.numTexts[n].text="",this.roomNum[n]=-1;break}},t.prototype.on_resetBtn=function(e){for(var t=this.roomNum.length,n=t-1;n>=0;n--)this.numTexts[n].text="",this.roomNum[n]=-1},t.prototype.on_joinBtn=function(t){var n=this;e.RoomApi.joinRoom(this.getRoomNum(),function(t){e.BasePanel.currentPanel.gotoPanel(new e.ExtGamePanel(n.gameConf,t.room,t.roles))})},t.prototype.onNumBtn=function(e){var t=e.currentTarget,n=this.numBtnNames.indexOf(t.name),o=0;for(var a in this.roomNum){if(-1==this.roomNum[a]){this.numTexts[a].text=this.numBtnVals[n].toString(),this.roomNum[a]=this.numBtnVals[n],o++;break}o++}6==o&&this.on_joinBtn(e)},t.prototype.getRoomNum=function(){for(var e=this.roomNum.length,t="",n=0;e>n;n++)-1!=this.roomNum[n]&&(t+=this.roomNum[n]);return t},t.prototype.on_closeBtn=function(e){this.closeBtn.visible=!1;var t=this,n=this.mainPanel.mainContent;egret.Tween.get(n).to({x:-640},300,egret.Ease.backIn).call(function(){t.mainPanel.joinGamePanel.closeBtn.visible=!0})},t.prototype.dispose=function(){for(var t in this.numBtns)this.numBtns[t].removeEventListener(starlingswf.SwfButton.onClick,this.onNumBtn,this);e.InterfaceVariablesUtil.disposeVariables(this)},t}();e.RoomNumberInputPanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.init=function(){e.AppConfig.need_wx&&(e.NetworkLoading.show(!0),this.mainAsset.visible=!1),this.accountInput.type=egret.TextFieldType.INPUT;var t=egret.localStorage.getItem("account");this.accountInput.text=t,""!=e.AppConfig.account&&(this.accountInput.text=e.AppConfig.account,this.on_loginBtn(null))},n.prototype.layout=function(){var t=this.inputBg;e.LayoutUtil.layout_center_up(t),e.LayoutUtil.layout_center_up(this.accountInput),e.LayoutUtil.layout_center_up(this.loginBtn)},n.prototype.mainAssetName=function(){return"spr_login"},n.prototype.on_loginBtn=function(t){var n=this.accountInput.text;if(null==n||""==n)return void e.ApiState.showText("账号不能为空");var o=this;e.UserApi.reg(n,function(t){egret.localStorage.setItem("account",n),null==e.RoleData.getRole()?e.RoleApi.createRole(n,function(e){o.startGame()}):o.startGame()})},n.prototype.startGame=function(){e.AppConfig.need_wx&&e.NetworkLoading.hide(),e.App.heart(),this.gotoPanel(new e.MainPanel)},n}(e.BasePanel);e.LoginPanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return t.call(this,!0)||this}return __extends(n,t),n.prototype.init=function(){var t=e.RoleData.getRole();this.roleHeadSpr.getTextField("nameText").text=t.name,this.roleHeadSpr.getTextField("idText").width=200,this.roleHeadSpr.getTextField("idText").text="ID:"+t.uid,this.fkText.text=t.card.toString(),this.gameListSpr=this.mainContent.getSprite("gameListSpr"),this.joinGamePanel=new e.JoinGamePanel(this,this.mainContent.getSprite("joinGameSpr")),this.roomNumberInputPanel=new e.RoomNumberInputPanel(this,this.mainContent.getSprite("inputRoomNumberSpr")),this.scrollViewContent=new egret.DisplayObjectContainer,this.scrollView=new egret.ScrollView,this.scrollView.setContent(this.scrollViewContent),this.gameListSpr.addChild(this.scrollView),this.meBtn=this.endSpr.getButton("meBtn"),this.meBtn.addEventListener(starlingswf.SwfButton.onClick,this.on_meBtn,this),this.mainPageBtn=this.endSpr.getButton("mainPageBtn"),this.mainPageBtn.addEventListener(starlingswf.SwfButton.onClick,this.on_mainPageBtn,this),this.bbsBtn=this.endSpr.getButton("bbsBtn"),this.bbsBtn.addEventListener(starlingswf.SwfButton.onClick,this.on_bbsBtn,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEntreFrame,this),this.createRoleHead();var n=this;e.GameApi.getGameList(function(e){n.getFollowCard(),n.createGameiIconBtns(),n.returnGame(),n.openBuyCardPanel()}),e.WxUtils.joinPlatform()},n.prototype.createGameiIconBtns=function(){var t,n,o=e.ExtGameConfigData.getGameList(),a=o.length,i=[41,333.95],r=158,s=0,l=0;this.gameBtns=[];for(var c=0;a>c;c++)n=o[c],t=new e.MainPanelGameBtn(this,n,new starlingswf.SwfSprite),t.x=i[l],t.y=s*r,l++,2==l&&(s++,l=0),this.gameBtns.push(t),this.scrollViewContent.addChild(t)},n.prototype.createRoleHead=function(){this.headImage=new e.RoleHeadImage(e.RoleData.getRole(),!0),this.headImage.width=this.headImage.height=84,this.headImage.x=this.headImage.y=15,this.roleHeadSpr.addChild(this.headImage);var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawCircle(0,0,42),t.graphics.endFill(),t.x=t.y=57,this.headImage.mask=t,this.addChild(t)},n.prototype.onEntreFrame=function(t){var n=e.RoleData.getRole();this.fkText.text=n.card.toString()},n.prototype.on_settingBtn=function(t){lzm.Alert.alert(new e.SettingPanel)},n.prototype.on_meBtn=function(t){e.ManagerBase.show()},n.prototype.on_plusFkBtn=function(t){lzm.Alert.alert(new e.ProxyPanel(this))},n.prototype.on_bbsBtn=function(t){""!=e.AppConfig.weichat_account_url&&(location.href=e.AppConfig.weichat_account_url)},n.prototype.mainAssetName=function(){return"spr_main"},n.prototype.layout=function(){this.bg.width=e.App.stageWidth,this.bg.height=e.App.stageHeight,e.LayoutUtil.layout_down(this.endSpr),e.LayoutUtil.layout_down(this.bg1),this.scrollView.x=0,this.scrollView.y=0,this.scrollView.width=640,this.scrollView.height=e.App.stageHeight-this.gameListSpr.y-this.endSpr.height},n.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=this.gameBtns.length,n=0;e>n;n++)this.gameBtns[n].dispose();this.headImage.dispose(),this.joinGamePanel.dispose(),this.roomNumberInputPanel.dispose(),this.meBtn.removeEventListener(starlingswf.SwfButton.onClick,this.on_meBtn,this),this.mainPageBtn.removeEventListener(starlingswf.SwfButton.onClick,this.on_mainPageBtn,this),this.bbsBtn.removeEventListener(starlingswf.SwfButton.onClick,this.on_bbsBtn,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEntreFrame,this)},n.prototype.returnGame=function(){var t=this;e.GameApi.returnGame(function(o){if(null==o.room)t.joinGameByShare();else{n.isFirstJoinPlatform=!1;var a=o.room;t.returnGameData=o,t.returnGameConf=e.ExtGameConfigData.getGameConfig(a.data.game_id),new e.GameAssetLoader(t.returnGameConf,t.onLoadGameComplete,t).startLoad()}})},n.prototype.onLoadGameComplete=function(){var t=this.returnGameData.room,n=this.returnGameData.roles,o=this.returnGameData.voteEndGames;e.BasePanel.currentPanel.gotoPanel(new e.ExtGamePanel(this.returnGameConf,t,n,o)),e.GameApi.loginGame(null)},n.prototype.joinGameByShare=function(){if(n.isFirstJoinPlatform){n.isFirstJoinPlatform=!1;var t=e.AccountData.getUrlData();t.state&&(n.shareGameId=t.state.game_id,n.shareRoomId=t.state.room_id,new e.GameAssetLoader(e.ExtGameConfigData.getGameConfig(n.shareGameId),this.onLoadGameComplete2,this).startLoad())}},n.prototype.onLoadGameComplete2=function(){e.RoomApi.joinRoom(n.shareRoomId,function(t){e.BasePanel.currentPanel.gotoPanel(new e.ExtGamePanel(e.ExtGameConfigData.getGameConfig(n.shareGameId),t.room,t.roles))})},n.prototype.on_mainPageBtn=function(t){return null==e.AppConfig.activity_mainClass||""==e.AppConfig.activity_mainClass?void e.ApiState.showText("暂时没有运营活动"):void(RES.isGroupLoaded("activity_res")?this.showActivity():(e.NetworkLoading.show(!0),e.AssetManager.loadConfig(e.AppConfig.activity_resConfigUrl,e.AppConfig.activity_resUrl,this.loadActivityResConfigComplete,this)))},n.prototype.loadActivityResConfigComplete=function(t){e.AssetManager.loadGroup("activity_res",this.loadActivityAssetComplete,this)},n.prototype.loadActivityAssetComplete=function(t){var n=t[0],o=t[1];if("onResourceLoadComplete"==n)e.NetworkLoading.hide(),this.showActivity();else if("onResourceProgress"==n){var a=parseInt((o.itemsLoaded/o.itemsTotal*100).toString());e.NetworkLoading.setLoadinText(a+"%")}},n.prototype.showActivity=function(){var t=egret.getDefinitionByName(e.AppConfig.activity_mainClass),n=new t;lzm.Alert.alert(n)},n.prototype.getFollowCard=function(){"1"==egret.getOption("getFollowCard")&&e.ActivityApi.getFollowCard(function(t){e.ApiState.showText("领取成功")})},n.prototype.openBuyCardPanel=function(){"1"==egret.getOption("buyCard")&&lzm.Alert.alert(new e.BuyCardFromProxy)},n}(e.BasePanel);t.isFirstJoinPlatform=!0,e.MainPanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(n,o,a){var i=this,r=new e.NetImage(o.icon);return r.width=260,r.height=158,a.addChild(r),i=t.call(this,a)||this,i.mainPanel=n,i.gameConf=o,i.image=r,i.addEventListener(starlingswf.SwfButton.onClick,i.onClicnEvent,i),i}return __extends(n,t),n.prototype.onClicnEvent=function(t){return null!=this.gameConf.matchClass?void this.loadMatchAssets():null!=this.gameConf.jump_url?void(window.location.href=this.gameConf.jump_url):this.gameConf.close?void e.ApiState.showText("游戏暂未开放"):void new e.GameAssetLoader(this.gameConf,this.onLoadGameComplete,this).startLoad()},n.prototype.onLoadGameComplete=function(){this.mainPanel.joinGamePanel.setGameConfig(this.gameConf),this.mainPanel.roleHeadSpr.visible=!1;var e=this,t=this.mainPanel.mainContent;egret.Tween.get(t).to({x:-640},300,egret.Ease.backIn).call(function(){e.mainPanel.joinGamePanel.closeBtn.visible=!0})},n.prototype.loadMatchAssets=function(){RES.isGroupLoaded("match_res")?this.showMatch():(e.NetworkLoading.show(!0),e.AssetManager.loadConfig(this.gameConf.matchResConfigUrl,this.gameConf.matchResUrl,this.loadMatchResConfigComplete,this))},n.prototype.loadMatchResConfigComplete=function(t){e.AssetManager.loadGroup("match_res",this.loadMatchAssetComplete,this)},n.prototype.loadMatchAssetComplete=function(t){var n=t[0],o=t[1];if("onResourceLoadComplete"==n)e.NetworkLoading.hide(),this.showMatch();else if("onResourceProgress"==n){var a=parseInt((o.itemsLoaded/o.itemsTotal*100).toString());e.NetworkLoading.setLoadinText(a+"%")}},n.prototype.showMatch=function(){var e=egret.getDefinitionByName(this.gameConf.matchClass),t=new e;lzm.Alert.alert(t)},n.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeEventListener(starlingswf.SwfButton.onClick,this.onClicnEvent,this),this.image.dispose()},n}(starlingswf.SwfButton);e.MainPanelGameBtn=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.control1=new e.VolumeControl(n.mainAsset.getSprite("volume1"),1),n.control2=new e.VolumeControl(n.mainAsset.getSprite("volume2"),2),n}return __extends(n,t),n.prototype.mainAssetName=function(){return"spr_setting"},n.prototype.dispose=function(){t.prototype.dispose.call(this),this.control1.dispose(),this.control2.dispose()},n}(e.BasePanel);e.SettingPanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(t,n){e.InterfaceVariablesUtil.initVariables(this,t),this.type=n,this.tag.touchEnabled=!0,1==this.type?this.tag.x=300*e.SettingData.soundVolume()+3:this.tag.x=300*e.SettingData.bgSoundVolume()+3,this.updateWidth(),this.tag.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.tag.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this.tag.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.mouseUp,this)}return t.prototype.mouseDown=function(e){this.tag.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},t.prototype.mouseUp=function(t){this.tag.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this);var n=this.tag.x-3,o=n/300;if(1==this.type)e.SettingData.setSoundVolume(o),0>=o?starlingswf.SwfButton.defSound=null:starlingswf.SwfButton.defSound=RES.getRes("ui_click");else if(e.SettingData.setBgSoundVolume(o),e.SoundManager.currentBgName){var a=e.SoundManager.currentGameSoundChannels[e.SoundManager.currentBgName];null!=a&&(a.volume=o)}},t.prototype.mouseMove=function(e){var t=this.tag.parent.globalToLocal(e.stageX,e.stageY).x;this.tag.x=3>t?3:t>300?300:t,this.updateWidth()},t.prototype.updateWidth=function(){this.val.width=this.tag.x-3},t.prototype.dispose=function(){this.tag.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.tag.removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this.tag.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.mouseUp,this)},t}();e.VolumeControl=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var n=t.call(this)||this;n.items={};var o,a,i=e.RoomData.getRoles(),r=89.05,s=135,l=44;for(var c in i)o=i[c],a=new e.VoteResultItem,a.setName(o.name),e.ExtGameHelper.isOffLine(o.uid)?a.setState(3):a.setState(2),a.x=r,a.y=s,s+=l,n.items[c]=a,n.mainAsset.addChild(a);return n.checkState(),n.timeVal=300,n.timeTextTimeoutId=egret.setInterval(n.updateTimeText,n,1e3),n}return __extends(n,t),n.prototype.on_agreeBtn=function(t){e.RoomApi.voteEndGame(1)},n.prototype.on_disagreeBtn=function(t){e.RoomApi.voteEndGame(0)},n.prototype.setLeaveName=function(e){this.titleText.text="是否同意玩家 "+e+" 离开游戏？"},n.prototype.setBtnState=function(){this.agreeBtn.setEnable(!1),this.disagreeBtn.setEnable(!1)},n.prototype.showByDatas=function(t){var n=e.RoleData.getRole().uid;-1!=t.indexOf(n+"")&&this.setBtnState(),this.setLeaveName(e.RoomData.getRole(t[0]).name);for(var o,a=t.length,i=0;a>i;i++)o=t[i],this.items[o].setState(1)},n.prototype.checkState=function(){var t=this;this.timeoutId=egret.setTimeout(function(){e.RoomApi.checkVoteEndGame(),t.checkState()},this,1e4+5e3*Math.random())},n.prototype.updateTimeText=function(){this.timeVal-=1,this.timeText.text=this.timeVal+"秒后系统将自动判定为同意",this.timeVal<0&&e.RoomApi.checkVoteEndGame()},n.prototype.dispose=function(){t.prototype.dispose.call(this),egret.clearTimeout(this.timeoutId),egret.clearInterval(this.timeTextTimeoutId)},n.prototype.mainAssetName=function(){return"spr_vote_EndGame"},n}(e.BasePanel);e.VoteEndGamePanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.chooseMC.gotoAndStop(3),t}return __extends(t,e),t.prototype.setName=function(e){this.nameText.text=e},t.prototype.setState=function(e){this.chooseMC.gotoAndStop(e)},t.prototype.mainAssetName=function(){return"spr_vote_player_choose"},t}(e.BasePanel);e.VoteResultItem=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.show=function(e){t.stateTxt[e]?t.showText(t.stateTxt[e]):t.showText("未知错误")},t.showText=function(t){var n=e.AssetManager.mainSwf().createSprite("spr_apiState");n.scaleX=n.scaleY=5,n.y=e.App.stageHeight/2,n.x=e.App.stageWidth/2,e.App.isLandscape&&(n.rotation=90),n.getChildAt(1).text=t,lzm.Alert.show(n),egret.Tween.get(n).to({scaleX:1,scaleY:1},300,egret.Ease.backIn).call(function(e){egret.setTimeout(function(){n.parent.removeChild(n)
},this,2e3)},this,[n])},t}();t.stateTxt={"-1":"api错误","-2":"方法传递错误","-3":"参数不足","-4":"参数非法","-5":"请先登陆","-6":"用户不存在","-7":"用户名已经存在","-8":"房卡不足","-9":"需要至少一张房卡，才能加入游戏","-10":"房间不存在","-11":"房间已满","-12":"已经在房间中","-13":"角色不存在","-14":"这个玩家不是你的玩家","-15":"这个玩家已经是代理了","-16":"游戏不存在","-17":"游戏已经开始，不能直接退出","-18":"房卡消耗配置错误","-19":"游戏已经开始","-20":"你没有推荐权限","-21":"房卡不足不能成为代理","-22":"你不是房主","-23":"玩家不在房间中","-24":"助理人数已达上限","-25":"下级人数已达上限","-26":"积分不足","-27":"抽奖失败","-28":"房卡更改失败","-29":"抽奖记录保存失败","-30":"已添加业务员","-31":"老代理不能绑定业务员","-32":"已经领取过关注奖励"},e.ApiState=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.mouseClick=function(t){e.ChatManager.showChatPanel()},t.createChatButton=function(){var n=e.AssetManager.mainSwf().createButton("btn_chat");return n.addEventListener(egret.TouchEvent.TOUCH_TAP,t.mouseClick,t),n},t.destroyChatButton=function(e){e.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.mouseClick,t),e.parent&&e.parent.removeChild(e)},t}();e.ChatButton=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.onPaoMadeng=function(t){e.PaoMaDeng.show(t.text,t.gap,t.count)},t}();e.AdminApi=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.mainAsset=e.AssetManager.mainSwf().createSprite("spr_netword_error"),n.addChild(n.mainAsset),n.mainAsset.getButton("okBtn").addEventListener(starlingswf.SwfButton.onClick,n.onOkBtn,n),n}return __extends(n,t),n.show=function(){var t=new n;t.y=e.App.stageHeight/2,t.x=e.App.stageWidth/2,e.App.isLandscape&&(t.rotation=90),lzm.Alert.alert(t,!1)},n.prototype.onOkBtn=function(e){location.replace(location.href)},n}(egret.DisplayObjectContainer);e.NetWorkError=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.show=function(n){void 0===n&&(n=!1),e.Log.log("NetworkLoading =========== show"),null==t.loading&&(t.loading=e.AssetManager.mainSwf().createSprite("spr_net_loading"),t.loadingText=t.loading.getTextField("loadingText"),t.background=new egret.Shape,t.background.touchEnabled=!0,t.showCount=0),n?(t.showCount++,t.realyShow()):(e.App.appRoot.addChild(t.background),t.background.graphics.clear(),t.background.graphics.beginFill(0,0),t.background.graphics.drawRect(0,0,e.App.stageWidth,e.App.stageHeight),t.background.graphics.endFill(),t.showCount++,egret.setTimeout(function(){t.showCount>0&&t.realyShow()},t,1e3))},t.realyShow=function(){e.App.appRoot.addChild(t.background),t.background.graphics.clear(),t.background.graphics.beginFill(0,.7),t.background.graphics.drawRect(0,0,e.App.stageWidth,e.App.stageHeight),t.background.graphics.endFill(),e.App.appRoot.addChild(t.loading),t.loading.x=e.App.stageWidth/2,t.loading.y=e.App.stageHeight/2,t.loadingText.text="loading"},t.setLoadinText=function(e){t.loadingText.text=e},t.hide=function(){e.Log.log("NetworkLoading =========== hide"),t.showCount--,null!=t.background&&0==t.showCount&&(t.background.parent&&t.background.parent.removeChild(t.background),t.loading.parent&&t.loading.parent.removeChild(t.loading))},t}();e.NetworkLoading=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.text.width=3e3,e.text.mask=e.textMask,e.playing=!1,e}return __extends(n,t),n.show=function(e,t,o){null==n.instance&&(n.instance=new n,n.tips=[]),n.tips.push([e,t,o]),1==n.tips.length&&egret.setTimeout(function(){n.instance.start()},n,1e3)},n.prototype.start=function(){var t=n.tips[0][0];this.text.text=t,this.textWidth=this.text.textWidth,this.text.x=315,this.addEventListener(egret.Event.ENTER_FRAME,this.update,this),e.App.topContainer.addChild(this)},n.prototype.stop=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.parent&&this.parent.removeChild(this);var e=n.tips[0][1],t=n.tips[0][2]-1;t>0?(n.tips[0][2]=t,egret.setTimeout(function(){n.instance.start()},this,1e3*e)):(n.tips.shift(),n.tips.length>0&&n.instance.start())},n.prototype.update=function(e){this.text.x-=2,this.text.x<-this.textWidth+-268&&this.stop()},n.prototype.layout=function(){e.App.isLandscape?(this.x=e.App.stageWidth-240,this.y=e.App.stageHeight/2,this.rotation=90):(this.x=e.App.stageWidth/2,this.y=120,this.rotation=0)},n.prototype.mainAssetName=function(){return"spr_lb"},n}(e.BasePanel);e.PaoMaDeng=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(n,o){void 0===o&&(o=!1);var a=t.call(this,null)||this;return a.image.width=81,a.image.height=80,o&&(a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,a.onClick,a)),a.wrzImage=e.AssetManager.mainNewSwf().createImage("img_WRZ_WZ_AN"),a.wrzImage.x=40.5,a.wrzImage.y=40,a.addChild(a.wrzImage),a.reloadByRole(n),a}return __extends(n,t),n.prototype.reloadByRole=function(t){if(null!=t){if(null==this.role?e.RoleHeadCache.addHead(t.uid,this):e.RoleHeadCache.replaceHead(this.role.uid,t.uid),this.role=t,this.role.proxy>0||null!=this.role.cert&&parseInt(this.role.cert)>0?this.wrzImage.visible=!1:this.wrzImage.visible=!0,null==this.role.head||""==this.role.head)return void(this.image.texture=RES.getRes("defUser"));if(null!=t.head&&""!=t.head){var n=t.head;n=n.replace("/0","/64"),this.reload(n)}else this.reload(t.head)}},n.prototype.onClick=function(t){e.App.isLandscape?lzm.Alert.alertLandscape(new e.RoleInfo(this.role,this.image.texture)):lzm.Alert.alert(new e.RoleInfo(this.role,this.image.texture))},n.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.prototype.$setWidth=function(e){return this.wrzImage.x=e/2,t.prototype.$setWidth.call(this,e)},n.prototype.$setHeight=function(e){return this.wrzImage.y=e/2,t.prototype.$setHeight.call(this,e)},n}(e.NetImage);e.RoleHeadImage=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(e,n){var o=t.call(this)||this;return o.role=e,o.headImage=new egret.Bitmap,o.headImage.texture=n,o.headImage.width=o.headImage.height=72,o.headImage.x=125,o.headImage.y=61,o.mainAsset.addChild(o.headImage),o.nameText.text=o.role.name,o.idText.text="ID:"+o.role.uid,o.ipText.text="IP:"+o.role.ip,o}return __extends(n,t),n.prototype.on_posBtn=function(t){return 0==this.role.latitude&&0==this.role.longitude?void e.ApiState.showText("该玩家没有共享地理位置"):void e.WxUtils.openLocation(this.role.latitude,this.role.longitude)},n.prototype.mainAssetName=function(){return"spr_role_info"},n}(e.BasePanel);e.RoleInfo=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.arrow=e.AssetManager.mainSwf().createSprite("spr_share"),n.addChild(n.arrow),n.touchEnabled=!0,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.addToStage,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.removeFromStage,n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,n.onClick,n),n}return __extends(n,t),Object.defineProperty(n,"instance",{get:function(){return null==n._tip&&(n._tip=new n),n._tip},enumerable:!0,configurable:!0}),n.prototype.show=function(){this.graphics.clear(),this.graphics.beginFill(0,.7),this.graphics.drawRect(0,0,e.App.stageWidth,e.App.stageHeight),this.graphics.endFill(),this.arrow.x=e.App.stageWidth,null!=window.orientation&&90==window.orientation?(this.arrow.y=e.App.stageHeight,this.arrow.rotation=90):(this.arrow.y=0,this.arrow.rotation=0),null==this.parent&&e.App.appRoot.addChild(this)},n.prototype.hide=function(){null!=this.parent&&this.parent.removeChild(this)},n.prototype.onClick=function(e){this.hide()},n.prototype.addToStage=function(e){this.stage.addEventListener(egret.Event.RESIZE,this.resize,this)},n.prototype.removeFromStage=function(e){this.stage.removeEventListener(egret.Event.RESIZE,this.resize,this)},n.prototype.resize=function(e){this.show()},n}(egret.Sprite);e.ShareTip=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.create=function(t,o,a,i,r){void 0===i&&(i=null),void 0===r&&(r=!0);var s=new n;return s.tipText.text=t,s.eventThisObj=o,s.eventOkFun=a,s.eventCancalFun=i,r&&(e.App.isLandscape?lzm.Alert.alertLandscape(s):lzm.Alert.alert(s)),s},n.prototype.on_cancelBtn=function(e){null!=this.eventCancalFun&&this.eventCancalFun.apply(this.eventThisObj,[]),this.on_closeBtn(null)},n.prototype.on_okBtn=function(e){null!=this.eventOkFun&&this.eventOkFun.apply(this.eventThisObj,[]),this.on_closeBtn(null)},n.prototype.mainAssetName=function(){return"spr_tip_panel"},n}(e.BasePanel);e.TipPanel=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.show=function(){null==t.warningDisplay&&(t.warningDisplay=e.AssetManager.mainNewSwf().createSprite("spr_jinzhidubo")),e.App.isLandscape?(t.warningDisplay.rotation=90,t.warningDisplay.x=e.App.stageWidth+48,t.warningDisplay.y=e.App.stageHeight/2,egret.setTimeout(function(){egret.Tween.get(t.warningDisplay).to({x:e.App.stageWidth},300,egret.Ease.backOut)},t,1e3)):(t.warningDisplay.x=e.App.stageWidth/2,t.warningDisplay.y=-48,egret.setTimeout(function(){egret.Tween.get(t.warningDisplay).to({y:0},300,egret.Ease.backOut)},t,1e3)),e.App.topContainer.addChild(t.warningDisplay),egret.setTimeout(function(){t.warningDisplay.parent.removeChild(t.warningDisplay)},t,6e3)},t}();e.TipWarning=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.mouseDown=function(n){e.WxUtils.startRecord(),null==t.microphoneImage&&(t.microphoneImage=e.AssetManager.chatSwf().createMovie("mc_voice"),t.microphoneImage.anchorOffsetX=t.microphoneImage.anchorOffsetY=71),t.microphoneImage.x=e.App.stageWidth/2,t.microphoneImage.y=e.App.stageHeight/2,e.App.appRoot.addChild(t.microphoneImage),e.App.isLandscape?t.microphoneImage.rotation=90:t.microphoneImage.rotation=0},t.mouseUp=function(n){e.WxUtils.stopRecord(function(t){e.WxUtils.uploadVoice(t,function(n){e.ChatApi.sendVoice(n,function(n){e.WxUtils.playVoice(t);var o=e.RoleData.getRole().uid;e.ChatManager.showVoice({sender:o})})})}),null!=t.microphoneImage&&null!=t.microphoneImage.parent&&t.microphoneImage.parent.removeChild(t.microphoneImage)},t.createVoiceButton=function(){var n=e.AssetManager.mainSwf().createButton("btn_voice");return n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.mouseDown,t),n.addEventListener(egret.TouchEvent.TOUCH_END,t.mouseUp,t),n.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.mouseUp,t),n},t.destroyVocieButton=function(e){e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,t.mouseDown,t),e.removeEventListener(egret.TouchEvent.TOUCH_END,t.mouseUp,t),e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.mouseUp,t),e.parent&&e.parent.removeChild(e)},t}();e.VoiceButton=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.showWait=function(n){null==t.waitingDisplay&&(t.waitingDisplay=e.AssetManager.mainSwf().createSprite("spr_wait_leave_user")),t.waitingDisplay.getChildAt(1).text=n,t.waitingDisplay.x=e.App.stageWidth/2,t.waitingDisplay.y=e.App.stageHeight/2,e.App.isLandscape?t.waitingDisplay.rotation=90:t.waitingDisplay.rotation=0,e.App.appRoot.addChild(t.waitingDisplay)},t.hideWait=function(){null!=t.waitingDisplay&&null!=t.waitingDisplay.parent&&t.waitingDisplay.parent&&t.waitingDisplay.parent.removeChild(t.waitingDisplay)},t}();e.WaitingTextTip=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var BmTextUtil=function(){function e(){}return e.replaceTextfield=function(e,t){var n=new egret.BitmapText,o=e;if(n.font=t,n.textAlign=o.textAlign,n.text=o.text,n.name=o.name,n.x=o.x,n.y=o.y,n.width=o.width,n.height=o.height,n.anchorOffsetX=o.anchorOffsetX,n.anchorOffsetY=o.anchorOffsetY,null!=o.parent){var a=o.parent.getChildIndex(o);o.parent.addChildAt(n,a),o.parent.removeChild(o)}return n},e}(),lj;!function(e){var t;!function(e){var t=function(){function e(){}return e.setGray=function(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(t);e.filters=[n]},e.clearColor=function(e){e.filters=null},e}();e.ColorUtil=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e.initVariables=function(e,t){for(var n,o,a,i=[],r=[],s=t.$children.length,l=0;s>l;l++)o=t.$children[l],n=o.name,null!=n&&""!=n&&(e[n]=o),o instanceof starlingswf.SwfButton&&(a="on_"+n,e[a]&&(o.addEventListener(starlingswf.SwfButton.onClick,e[a],e),i.push(o),r.push(n)));e._hasEventBtns_=i,e._hasEventBtnNames_=r},e.disposeVariables=function(e){var t=e._hasEventBtns_,n=e._hasEventBtnNames_;if(null!=t&&null!=n)for(var o=t.length,a=0;o>a;a++)t[a].removeEventListener(starlingswf.SwfButton.onClick,e[n[a]],e)},e}();e.InterfaceVariablesUtil=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.layout_up=function(e){},t.layout_down=function(n){n.y=e.App.stageHeight-(e.App.designHeight-t.getLayoutY(n))},t.layout_left=function(e){},t.layout_left_up=function(e){t.layout_left(e),t.layout_up(e)},t.layout_left_down=function(e){t.layout_left(e),t.layout_down(e)},t.layout_right=function(n){n.x=e.App.stageWidth-(e.App.designWidth-t.getLayoutX(n))},t.layout_right_up=function(e){t.layout_right(e),t.layout_up(e)},t.layout_right_down=function(e){t.layout_right(e),t.layout_down(e)},t.layout_center_x=function(t){t.x=(e.App.stageWidth-t.width)/2},t.layout_center_y=function(t){t.y=(e.App.stageHeight-t.height)/2},t.layout_center_xy=function(e){t.layout_center_x(e),t.layout_center_y(e)},t.layout_center_up=function(e){t.layout_center_x(e),t.layout_up(e)},t.layout_center_down=function(e){t.layout_center_x(e),t.layout_down(e)},t.layout_fill=function(t){t.width=e.App.stageWidth,t.height=e.App.stageHeight},t.getLayoutX=function(e){return e._layout_x_?e._layout_x_:(e._layout_x_=e.x,e.x)},t.getLayoutY=function(e){return e._layout_y_?e._layout_y_:(e._layout_y_=e.y,e.y)},t}();e.LayoutUtil=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function e(){}return e.log=function(e){egret.log(e)},e}();e.Log=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));var lj;!function(e){var t;!function(e){var t=function(){function t(){}return t.hasWx=function(){return"undefined"!=typeof wx},t.initWx=function(){t.playSoundQueue=[],t.playSounding=!1;var n=new BodyConfig;n.debug=e.AppConfig.wx_jssdk_config.debug,n.appId=e.AppConfig.wx_jssdk_config.appId,n.timestamp=e.AppConfig.wx_jssdk_config.timestamp,n.nonceStr=e.AppConfig.wx_jssdk_config.nonceStr,n.signature=e.AppConfig.wx_jssdk_config.signature,n.jsApiList=e.AppConfig.wx_jssdk_config.jsApiList,wx.config(n),wx.ready(function(){wx.hideAllNonBaseMenuItem(null),wx.showMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline","menuItem:favorite"]}),null==e.RoomData.getCurrentRoom()?t.joinPlatform():t.joinGame(e.ExtGameHelper.currentGameConfig())})},t.customizeShareDesc=function(n,o,a){void 0===a&&(a=!1),t.joinGame(e.ExtGameHelper.currentGameConfig(),n,o,a)},t.joinGame=function(n,o,a,i){if(void 0===o&&(o=null),void 0===a&&(a=null),void 0===i&&(i=!0),t.hasWx()){var r=e.RoomData.getCurrentRoom(),s=e.RoleData.getRole(),l=new BodyMenuShareAppMessage,c=e.AppConfig.login_path,u=e.AppConfig.web_res_path+"shareIcons/"+n.id+".png?v="+e.AccountData.getUrlData().resVer;null==o?l.title="【"+t.getShareRoleName(s.name)+"】邀请你加入房间:"+r.id+" - 【"+n.name+"】":l.title=o,null==a?l.desc="快来加入我的房间吧":l.desc=a,i&&(c+="?room_id="+r.id+"&game_id="+n.id),l.link=c,l.imgUrl=u,l.type="link",l.success=function(t){e.ShareTip.instance.hide()},wx.onMenuShareAppMessage(l);var p=new BodyMenuShareTimeline;p.title=n.name+"，快来加入我的房间吧",null==o?p.title="【"+s.name+"】邀请你加入房间:"+r.id+" - 【"+n.name+"】":p.title=o,p.link=c,p.imgUrl=u,p.success=function(t){e.ShareTip.instance.hide()},wx.onMenuShareTimeline(p)}},t.joinPlatform=function(){if(t.hasWx()){var n=e.AppConfig.login_path,o=e.AppConfig.web_res_path+"shareIcons/platform.png?v="+e.AccountData.getUrlData().resVer,a=new BodyMenuShareAppMessage;a.title="休闲竞技游戏平台",a.desc="好玩的游戏噢~",a.link=n,a.imgUrl=o,a.type="link",a.success=function(t){e.ShareTip.instance.hide()},wx.onMenuShareAppMessage(a);var i=new BodyMenuShareTimeline;i.title="休闲竞技游戏平台",i.link=n,i.imgUrl=o,i.success=function(t){e.ShareTip.instance.hide()},wx.onMenuShareTimeline(i)}},t.sharePayByProxy=function(){if(t.hasWx()){var n=e.RoleData.getRole(),o=e.AppConfig.login_path+"?proxy_id="+n.uid+"&buyCard=1",a=n.head,i=new BodyMenuShareAppMessage;i.title="点我购买房卡",i.desc="在代理【"+t.filteremoji(n.name)+"("+n.uid+")】处购买房卡",i.link=o,i.imgUrl=a,i.type="link",i.success=function(t){e.ShareTip.instance.hide()},wx.onMenuShareAppMessage(i);var r=new BodyMenuShareTimeline;r.title="点我购买房卡",r.link=o,r.imgUrl=a,r.success=function(t){e.ShareTip.instance.hide()},wx.onMenuShareTimeline(r)}},t.startRecord=function(){t.hasWx()&&wx.startRecord(null)},t.stopRecord=function(e){t.hasWx()&&wx.stopRecord({success:function(t){e(t.localId)}})},t.playVoice=function(e){if(t.hasWx()){if(t.playSounding)return void t.playSoundQueue.push(e);t.playSounding=!0,wx.playVoice({localId:e}),wx.onVoicePlayEnd({success:function(e){0==t.playSoundQueue.length?t.playSounding=!1:t.playVoice(t.playSoundQueue.shift())}})}},t.uploadVoice=function(e,n){t.hasWx()&&wx.uploadVoice({localId:e,isShowProgressTips:0,success:function(e){n(e.serverId)}})},t.downloadVoice=function(e,n){t.hasWx()&&wx.downloadVoice({serverId:e,isShowProgressTips:0,success:function(e){n(e.localId)}})},t.getLocation=function(e){t.hasWx()&&wx.getLocation({type:"gcj02",success:function(t){e(t)}})},t.openLocation=function(e,n){t.hasWx()&&wx.openLocation({latitude:e,longitude:n})},t.closeWindow=function(){t.hasWx()&&wx.closeWindow(null)},t.getShareRoleName=function(e){e=t.filteremoji(e);var n=e.length;return n>5?e.substr(0,5):e},t.filteremoji=function(e){return e},t}();e.WxUtils=t}(t=e.cgcp||(e.cgcp={}))}(lj||(lj={}));